function getCotizacionCliente() { var e = document.getElementById("son").value; $.ajax({ type: "GET", url: "../../Cotizacion/GetCotizacionClienteCabecera?idCotizacion=" + e, contentType: JSON, processData: !1, success: function (e) { $("#Email").val(e.Mail_Cliente), $("#Telefono").val(e.TelefonoCliente) }, error: function () { } }) } function getCotizacionClienteDetalle() { var e = document.getElementById("son").value; $.ajax({ type: "GET", url: "../../Cotizacion/GetCotizacionClienteDetalle?idCotizacion=" + e, contentType: JSON, processData: !1, success: function (e) { console.log(e.idMarca), $("#Aseguradora").empty(), $("#Aseguradora").append("<option value='2'> RIMAC - $" + e.Prima_LaPositiva + "</option>"), $("#Aseguradora").append("<option value='4'> PACIFICO - $" + e.Prima_Pacifico + "</option>"), $("#Aseguradora").append("<option value='3'> MAPFRE - $" + e.Prima_Mafre + "</option>"), $("#Aseguradora").append("<option value='1'> LA POSITIVA- $" + e.Prima_LaPositiva + "</option>"), $("#Aseguradora").append("<option value='5'> HDI - $" + e.Prima_HDI + "</option>") }, error: function () { alert("Oh no! :(") } }) } function Buy() { var e = document.getElementById("Nombres").value, o = document.getElementById("ApePaterno").value, a = document.getElementById("ApeMaterno").value, t = document.getElementById("Dni").value, n = document.getElementById("sexo").value, i = document.getElementById("Email").value, l = document.getElementById("Telefono").value, u = document.getElementById("domicilio").value, d = document.getElementById("ciudad").value, r = document.getElementById("Aseguradora").value; $("#buy").val("Generando su Orden de Compra"), $("#buy").prop("disabled", !0); var c = { Nombres: e, Apellido_Paterno: o, Apellido_Materno: a, DNI: t, Sexo: n, Email: i, Telefono: l, Domicilio: u, Ciudad: d, idAseguradora: r }; $.ajax({ url: "../../Compra/GenerarComprar", type: "POST", contentType: "application/json", data: JSON.stringify(c), success: function (e) { $("#buy").val("Estamos listos..."), $("#buy").prop("disabled", !0), window.location = "../Compra/thankyou" }, error: function () { $.toast("Lamentamos los inconvenientes, intenta de nuevo.", { duration: 3e3, type: "danger" }) } }) } function validateFormBuy() { var e = document.getElementById("Nombres"), o = document.getElementById("ApePaterno"), a = document.getElementById("ApeMaterno"), t = document.getElementById("Dni"), n = document.getElementById("domicilio"), i = document.getElementById("Email"), l = document.getElementById("Telefono"), u = 0; return e.value.length < 3 ? ($.toast("Por Favor completa tus Nombres", { duration: 3e3, type: "danger" }), e.focus(), e.className += " invalido", u = 0, !1) : (u = 1, o.value.length < 3 ? ($.toast("Por Favor completa tu Apellido Paterno", { duration: 3e3, type: "danger" }), o.focus(), o.className += " invalido", u = 0, !1) : (u = 1, a.value.length < 3 ? ($.toast("Por Favor completa tu Apellido Materno", { duration: 3e3, type: "danger" }), a.focus(), a.className += " invalido", u = 0, !1) : (u = 1, t.value.length < 8 ? ($.toast("Por favor Ingresa tu Nro. de DNI", { duration: 3e3, type: "danger" }), t.focus(), t.className += " invalido", u = 0, !1) : (u = 1, n.value.length < 7 ? ($.toast("Completa el campo Domicilio para continuar", { duration: 3e3, type: "danger" }), n.focus(), n.className += " invalido", u = 0, !1) : (u = 1, i.value.length < 3 ? ($.toast("Necesitamos un Email para comunicarnos contigo.", { duration: 3e3, type: "danger" }), i.focus(), i.className += " invalido", u = 0, !1) : (u = 1, l.value.length < 8 ? ($.toast("Nos comunicaremos al numero que indiques.", { duration: 3e3, type: "danger" }), l.focus(), l.className += " invalido", u = 0, !1) : (u = 1, void (0 != u && Buy())))))))) } $(document).ready(function () { var e = document.getElementById("son"); "" != e.value ? (getCotizacionCliente(), getCotizacionClienteDetalle()) : window.location = "../../Vehicular", $("#buy").click(validateFormBuy), $("#Dni").keyup(function () { $(this).val().length > 7 ? $("#buy").prop("disabled", !1) : $("#buy").prop("disabled", !0) }) });